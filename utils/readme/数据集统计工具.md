# æ•°æ®é›†ç»Ÿè®¡å·¥å…· (Dataset Statistics Tool)

ä¸€ä¸ªç”¨äºç»Ÿè®¡å’Œåˆ†æè¿åŠ¨æ•°æ®é›†çš„Pythonå·¥å…·ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿäº†è§£æ•°æ®é›†çš„ç»„æˆå’Œåˆ†å¸ƒã€‚

## ğŸ“¦ å·¥å…·åŒ…å†…å®¹

```
utils/
â”œâ”€â”€ dataset_statistics.py          # ä¸»ç¨‹åºï¼ˆ17KBï¼‰
â”œâ”€â”€ README_DATASET_STATISTICS.md   # å®Œæ•´æ–‡æ¡£ï¼ˆ8KBï¼‰
â”œâ”€â”€ QUICKSTART.md                  # å¿«é€Ÿå¼€å§‹ï¼ˆ6KBï¼‰
â”œâ”€â”€ SUMMARY.md                     # å·¥å…·åŒ…æ¦‚è§ˆï¼ˆ6KBï¼‰
â”œâ”€â”€ example_usage.sh               # ä½¿ç”¨ç¤ºä¾‹ï¼ˆ2KBï¼‰
â””â”€â”€ README.md                      # æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…

å°† `dataset_statistics.py` å¤åˆ¶åˆ°é¡¹ç›®çš„ `utils/` ç›®å½•ï¼š

```bash
cp dataset_statistics.py /path/to/your/project/utils/
```

### 2. åŸºæœ¬ä½¿ç”¨

```bash
# ç»Ÿè®¡è®­ç»ƒé›†
python utils/dataset_statistics.py \
    --config configs/partial_motion_knee_config.py \
    --data_dir data/train

# ç»Ÿè®¡æµ‹è¯•é›†
python utils/dataset_statistics.py \
    --config configs/partial_motion_knee_config.py \
    --data_dir data/test
```

### 3. ä¿å­˜ç»“æœ

```bash
python utils/dataset_statistics.py \
    --config configs/partial_motion_knee_config.py \
    --data_dir data/train \
    --save_output train_stats.txt
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

æ ¹æ®æ‚¨çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–‡æ¡£ï¼š

| æ–‡æ¡£ | é€‚åˆäººç¾¤ | å†…å®¹ |
|------|----------|------|
| **QUICKSTART.md** | ğŸ†• æ–°æ‰‹ç”¨æˆ· | æœ€å¸¸ç”¨çš„å‘½ä»¤å’Œå¿«é€Ÿä¸Šæ‰‹æŒ‡å— |
| **README_DATASET_STATISTICS.md** | ğŸ“– è¯¦ç»†äº†è§£ | å®Œæ•´åŠŸèƒ½è¯´æ˜ã€æŠ€æœ¯ç»†èŠ‚ã€æ•…éšœæ’é™¤ |
| **SUMMARY.md** | ğŸ“Š æ¦‚è§ˆ | å·¥å…·åŒ…æ¦‚è§ˆã€ä¸»è¦åŠŸèƒ½ã€å…¸å‹å·¥ä½œæµ |
| **example_usage.sh** | ğŸ’» å®è·µå­¦ä¹  | å¯æ‰§è¡Œçš„ç¤ºä¾‹è„šæœ¬ |

## â­ ä¸»è¦åŠŸèƒ½

âœ… **ç»Ÿè®¡æ–‡ä»¶æ€»æ•°** - å¿«é€Ÿç»Ÿè®¡æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰è¿åŠ¨æ•°æ®æ–‡ä»¶  
âœ… **æŒ‰ç±»å‹åˆ†ç±»** - æ ¹æ® action_patterns å°†æ–‡ä»¶åˆ†ç±»ç»Ÿè®¡  
âœ… **åˆ—å‡ºå…·ä½“æ–‡ä»¶** - æ˜¾ç¤ºæ¯ä¸ªè¿åŠ¨ç±»å‹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å  
âœ… **è¯†åˆ«æœªåŒ¹é…æ–‡ä»¶** - æ‰¾å‡ºä¸åŒ¹é…ä»»ä½•æ¨¡å¼çš„æ–‡ä»¶  
âœ… **ä¿å­˜ç»Ÿè®¡æŠ¥å‘Š** - å°†ç»“æœä¿å­˜åˆ°æ–‡æœ¬æ–‡ä»¶  

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: è®­ç»ƒå‰éªŒè¯

```bash
# éªŒè¯è®­ç»ƒé›†é…ç½®
python utils/dataset_statistics.py \
    --config configs/partial_motion_knee_config.py \
    --data_dir data/train

# æ£€æŸ¥è¾“å‡ºï¼Œç¡®è®¤ï¼š
# âœ“ åŒ¹é…ç‡æ˜¯å¦åˆç†
# âœ“ å„è¿åŠ¨ç±»å‹çš„æ•°æ®é‡
# âœ“ æ˜¯å¦æœ‰æ„å¤–çš„æœªåŒ¹é…æ–‡ä»¶
```

### åœºæ™¯2: è°ƒè¯•é…ç½®

```bash
# 1. è¿è¡Œç»Ÿè®¡
python utils/dataset_statistics.py \
    --config configs/partial_motion_knee_config.py \
    --data_dir data/train

# 2. æŸ¥çœ‹"æœªåŒ¹é…çš„æ–‡ä»¶"
# 2. ä¿®æ”¹ action_patterns
# 4. é‡æ–°è¿è¡ŒéªŒè¯
```

### åœºæ™¯3: ç”ŸæˆæŠ¥å‘Š

```bash
# ä¸ºå®éªŒç”Ÿæˆæ•°æ®é›†æŠ¥å‘Š
python utils/dataset_statistics.py \
    --config configs/partial_motion_knee_config.py \
    --data_dir data/train \
    --save_output reports/dataset_report.txt
```

## ğŸ“‹ å‘½ä»¤è¡Œå‚æ•°

```
å¿…éœ€å‚æ•°:
  --config PATH           é…ç½®æ–‡ä»¶è·¯å¾„

å¯é€‰å‚æ•°:
  --data_dir PATH         æ•°æ®ç›®å½•ï¼ˆé»˜è®¤: data/trainï¼‰
  --mode train|test       æ•°æ®æ¨¡å¼ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
  --save_output PATH      ä¿å­˜ç»“æœåˆ°æ–‡ä»¶
  --no_filenames          ä¸æ˜¾ç¤ºæ–‡ä»¶ååˆ—è¡¨
```

## ğŸ“Š è¾“å‡ºç¤ºä¾‹

```
================================================================================
æ•°æ®é›†ç»Ÿè®¡ç»“æœ
================================================================================

æ€»æ–‡ä»¶æ•°: 150
åŒ¹é…çš„æ–‡ä»¶æ•°: 45
æœªåŒ¹é…çš„æ–‡ä»¶æ•°: 105
åŒ¹é…ç‡: 30.00%

å…±æœ‰ 1 ä¸ªè¿åŠ¨ç±»å‹æ¨¡å¼
--------------------------------------------------------------------------------

1. 19. Stair descent
   æ­£åˆ™è¡¨è¾¾å¼: ['^stairs_.*down.*']
   åŒ¹é…æ–‡ä»¶æ•°: 45
   åŒ¹é…çš„æ–‡ä»¶:
      - stairs_1_down_1
      - stairs_1_down_2
      - ...

æœªåŒ¹é…ä»»ä½•æ¨¡å¼çš„æ–‡ä»¶ (105ä¸ª):
   - normal_walk_1_1_shuffle_on
   - ...

================================================================================
```

## âš™ï¸ é…ç½®è¦æ±‚

åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼š

```python
# configs/partial_motion_knee_config.py

# å¯ç”¨è¿åŠ¨ç±»å‹ç­›é€‰
enable_action_filter = True

# å®šä¹‰è¿åŠ¨ç±»å‹æ¨¡å¼ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰
action_patterns = [
    r"^normal_walk_.*_(shuffle|0-6|1-2|1-8).*",  # 1. Level ground walk
    r"^poses_.*",                                 # 2. Standing poses
    r"^stairs_.*down.*",                          # 19. Stair descent
    # æ³¨é‡Šæ‰çš„è¡Œå°†è¢«å¿½ç•¥
    # r"^stairs_.*up.*",                          # 21. Stair ascent
]
```

## ğŸ”§ ç³»ç»Ÿè¦æ±‚

- **Python**: 3.6+
- **ä¾èµ–**: ä»…ä½¿ç”¨Pythonæ ‡å‡†åº“ï¼ˆæ— éœ€é¢å¤–å®‰è£…ï¼‰
- **æ“ä½œç³»ç»Ÿ**: Windows / Linux / macOS

## ğŸ“– è¯¦ç»†æ–‡æ¡£

### æ–°æ‰‹å…¥é—¨
ğŸ‘‰ é˜…è¯» **QUICKSTART.md**
- 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹
- æœ€å¸¸ç”¨çš„å‘½ä»¤
- å¸¸è§ä½¿ç”¨åœºæ™¯

### æ·±å…¥äº†è§£
ğŸ‘‰ é˜…è¯» **README_DATASET_STATISTICS.md**
- å®Œæ•´åŠŸèƒ½è¯´æ˜
- æŠ€æœ¯å®ç°ç»†èŠ‚
- æ•…éšœæ’é™¤æŒ‡å—
- APIå‚è€ƒ

### å·¥å…·æ¦‚è§ˆ
ğŸ‘‰ é˜…è¯» **SUMMARY.md**
- å·¥å…·åŒ…æ€»è§ˆ
- ä¸»è¦åŠŸèƒ½
- å…¸å‹å·¥ä½œæµ
- ç‰ˆæœ¬ä¿¡æ¯

### å®è·µç¤ºä¾‹
ğŸ‘‰ è¿è¡Œ **example_usage.sh**
- å¯æ‰§è¡Œçš„ç¤ºä¾‹å‘½ä»¤
- å„ç§ä½¿ç”¨æ–¹å¼æ¼”ç¤º

## â“ è·å–å¸®åŠ©

### æŸ¥çœ‹å‘½ä»¤è¡Œå¸®åŠ©
```bash
python utils/dataset_statistics.py --help
```

### å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆæ‰€æœ‰æ–‡ä»¶éƒ½æ˜¾ç¤º"æœªåŒ¹é…"ï¼Ÿ**  
A: æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„ `enable_action_filter` æ˜¯å¦ä¸º `True`ï¼Œä»¥åŠ `action_patterns` æ˜¯å¦æ­£ç¡®é…ç½®ã€‚

**Q: å¦‚ä½•è°ƒè¯•æ­£åˆ™è¡¨è¾¾å¼ï¼Ÿ**  
A: ä½¿ç”¨ `--save_output` ä¿å­˜ç»“æœï¼ŒæŸ¥çœ‹"æœªåŒ¹é…çš„æ–‡ä»¶"åˆ—è¡¨ï¼Œç„¶åè°ƒæ•´æ­£åˆ™è¡¨è¾¾å¼ã€‚

**Q: åŒ¹é…ç‡å¤ªä½æ€ä¹ˆåŠï¼Ÿ**  
A: æ£€æŸ¥"æœªåŒ¹é…çš„æ–‡ä»¶"åˆ—è¡¨ï¼Œæ ¹æ®å®é™…æ–‡ä»¶åè°ƒæ•´ `action_patterns` ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚

æ›´å¤šé—®é¢˜è¯·æŸ¥çœ‹ **README_DATASET_STATISTICS.md** çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†ã€‚

## ğŸ“ ä½¿ç”¨æç¤º

1. **è®­ç»ƒå‰å¿…åš**: ä½¿ç”¨æ­¤å·¥å…·éªŒè¯æ•°æ®é›†é…ç½®
2. **å¯¹æ¯”éªŒè¯**: åˆ†åˆ«ç»Ÿè®¡è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œç¡®ä¿åˆ†å¸ƒåˆç†
3. **å®šæœŸæ£€æŸ¥**: æ¯æ¬¡ä¿®æ”¹ `action_patterns` åé‡æ–°è¿è¡Œç»Ÿè®¡
4. **ä¿å­˜è®°å½•**: ä½¿ç”¨ `--save_output` ä¿å­˜ç»Ÿè®¡ç»“æœä½œä¸ºå®éªŒè®°å½•

## ğŸ¯ å…¸å‹å·¥ä½œæµ

```bash
# æ­¥éª¤1: ç»Ÿè®¡è®­ç»ƒé›†å’Œæµ‹è¯•é›†
python utils/dataset_statistics.py --config configs/partial_motion_knee_config.py \
    --data_dir data/train --save_output logs/train_stats.txt

python utils/dataset_statistics.py --config configs/partial_motion_knee_config.py \
    --data_dir data/test --save_output logs/test_stats.txt

# æ­¥éª¤2: æŸ¥çœ‹ç»Ÿè®¡ç»“æœ
cat logs/train_stats.txt
cat logs/test_stats.txt

# æ­¥éª¤3: æ ¹æ®éœ€è¦è°ƒæ•´é…ç½®
# ä¿®æ”¹ configs/partial_motion_knee_config.py ä¸­çš„ action_patterns

# æ­¥éª¤4: é‡æ–°ç»Ÿè®¡éªŒè¯
python utils/dataset_statistics.py --config configs/partial_motion_knee_config.py \
    --data_dir data/train
```

## ğŸ“„ è®¸å¯

æœ¬å·¥å…·å¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹ã€‚

## ğŸ™ è‡´è°¢

æœ¬å·¥å…·ä¸“ä¸ºè¿åŠ¨æ•°æ®é›†ç»Ÿè®¡åˆ†æè€Œè®¾è®¡ï¼Œå¸®åŠ©ç ”ç©¶äººå‘˜å’Œå¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œç®¡ç†æ•°æ®é›†ã€‚

---

**ç‰ˆæœ¬**: 1.0  
**å‘å¸ƒæ—¥æœŸ**: 2025-01  
**Pythonè¦æ±‚**: 3.6+

**å¼€å§‹ä½¿ç”¨**: é˜…è¯» [QUICKSTART.md](QUICKSTART.md)  
**å®Œæ•´æ–‡æ¡£**: é˜…è¯» [README_DATASET_STATISTICS.md](README_DATASET_STATISTICS.md)